(this.webpackJsonpweatherapp=this.webpackJsonpweatherapp||[]).push([[0],{66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(32),i=a.n(c),s=a(12),o=a(4),u=a(6),l=a(3),j=a.n(l),d=a(7),h=a(14),b=a.n(h),v={load:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},save:function(e,t){localStorage.setItem(e,JSON.stringify(t))},remove:function(e){localStorage.removeItem(e)}};var f={getCurrentWeather:function(e){return m.apply(this,arguments)},getFiveDayForecast:function(e){return y.apply(this,arguments)}},p="0VzG5ATh98kzAmMeHPBN1FxpihPAc0Ai",x="currentWeather",O="foreCast";function m(){return(m=Object(d.a)(j.a.mark((function e(t){var a,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=v.load(x)||{})[t]){e.next=4;break}if(!(Date.now()-a[t].createdAt<18e5)){e.next=4;break}return e.abrupt("return",a[t].data);case 4:return e.prev=4,e.next=7,b.a.get("https://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=").concat(p));case 7:return r=e.sent,n=r.data[0],a[t]={data:n,createdAt:Date.now()},v.save(x,a),e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(4);case 16:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function y(){return(y=Object(d.a)(j.a.mark((function e(t){var a,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=v.load(O)||[])[t]){e.next=4;break}if(!(Date.now()-a[t].createdAt<18e5)){e.next=4;break}return e.abrupt("return",a[t].data);case 4:return e.prev=4,e.next=7,b.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(p,"&metric=",!0));case 7:return r=e.sent,n=r.data.DailyForecasts,a[t]={data:n,createdAt:Date.now()},v.save(O,a),e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(4);case 16:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}var g={debounce:function(e,t){var a;return function(){for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];clearTimeout(a),a=setTimeout((function(){e.apply(void 0,n)}),t)}},getTime:function(e){var t=new Date(e);return"".concat(t.getHours(),":").concat(t.getMinutes()," \u2022 ").concat(w(t.getDay())," ").concat(t.getDate()," ").concat(function(e){switch(e){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec";default:return""}}(t.getMonth())," ").concat(t.getFullYear())},getDay:function(e){return w(new Date(e).getDay())}};function w(e){switch(e){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return""}}var C=a(35),N=a(1),k=function(e){var t=e.city,a=e.removeFromFavorites,n=Object(r.useState)(null),c=Object(u.a)(n,2),i=c[0],s=c[1],l=Object(o.f)();Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getCurrentWeather(t.Key);case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);return i?Object(N.jsxs)("div",{className:"favorite-city-preview",onClick:function(){l.push("/city/"+t.Key)},children:[Object(N.jsx)("div",{className:"remove-from-favorite-btn",children:Object(N.jsx)(C.a,{onClick:function(e){e.stopPropagation(),a(t)}})}),Object(N.jsxs)("div",{className:"city-and-time",children:[Object(N.jsx)("div",{className:"city-name",children:t.City}),Object(N.jsx)("div",{className:"city-time",children:g.getTime(i.LocalObservationDateTime)})]}),Object(N.jsx)("img",{src:"https://www.accuweather.com/images/weathericons/".concat(i.WeatherIcon,".svg"),alt:i.WeatherText}),Object(N.jsx)("h4",{className:"weather-text",children:i.WeatherText}),Object(N.jsxs)("h4",{className:"weather-temperature",children:[i.Temperature.Metric.Value.toFixed(0),"\xb0"]})]}):null},F=a(13),S=a(19),D=function(){var e=Object(r.useState)(window.innerWidth<850),t=Object(u.a)(e,2),a=t[0],n=t[1],c=function(){var e=window.innerWidth;e<850?n(!0):e>850&&n(!1)};return Object(r.useEffect)((function(){return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}),[]),Object(N.jsx)("div",{className:"header",children:Object(N.jsx)("div",{className:"header-routing",children:a?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.b,{to:"/",children:Object(N.jsx)(S.a,{})}),Object(N.jsx)(s.b,{to:"/favorites",children:Object(N.jsx)(F.a,{})})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.b,{to:"/",children:Object(N.jsx)("h2",{children:"WeatherApp"})}),Object(N.jsx)(s.b,{to:"/favorites",children:Object(N.jsx)("h2",{children:"Favorites"})})]})})})},T={getCitiesNames:function(e){return A.apply(this,arguments)},getCityByGeolocation:function(){return I.apply(this,arguments)},toggleCityFavorite:function(e){var t=v.load(K)||[],a=t.findIndex((function(t){return t.Key===e.Key}));-1!==a?t.splice(a,1):t.push(e);return v.save(K,t),t},isCityFavorite:function(e){return(v.load(K)||[]).some((function(t){return t.Key===e}))},getFavoriteCities:function(){return v.load(K)||[]},getCityByKey:function(e){return z.apply(this,arguments)}},M="0VzG5ATh98kzAmMeHPBN1FxpihPAc0Ai",W="cities",K="favoriteCities";function A(){return(A=Object(d.a)(j.a.mark((function e(t){var a,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=v.load(W)||{})[t]){e.next=3;break}return e.abrupt("return",a[t].data);case 3:return e.prev=3,e.next=6,b.a.get("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(M,"&q=").concat(t));case 6:return r=e.sent,n=r.data.map((function(e){return{Key:e.Key,City:e.LocalizedName,Country:e.Country.LocalizedName}})),a[t]={data:n,createdAt:Date.now()},v.save(W,a),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(3);case 15:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function I(){return I=Object(d.a)(j.a.mark((function e(){var t,a,r,n,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{lat:-1,lng:-1},a=t.lat,r=t.lng,e.prev=1,-1!==a||-1!==r){e.next=4;break}return e.abrupt("return",Promise.resolve({Key:"215854",City:"Tel Aviv",Country:"Israel"}));case 4:return e.next=6,b.a.get("https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat(M,"&q=").concat(a,"%2C%20").concat(r));case 6:return n=e.sent,e.abrupt("return",{Key:n.data.Key,City:n.data.LocalizedName,Country:n.data.Country.LocalizedName});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",Promise.resolve({Key:"215854",City:"Tel Aviv",Country:"Israel"}));case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),I.apply(this,arguments)}function z(){return(z=Object(d.a)(j.a.mark((function e(t){var a,r,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=v.load(W)||[],e.t0=j.a.keys(a);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(r=e.t1.value,n=a[r].data.findIndex((function(e){return e.Key===t})),-1===n){e.next=7;break}return e.abrupt("return",Promise.resolve(a[r].data[n]));case 7:e.next=2;break;case 9:return e.prev=9,e.next=12,b.a.get("https://dataservice.accuweather.com/locations/v1/".concat(t,"?apikey=").concat(M));case 12:return c=e.sent,e.abrupt("return",c);case 16:e.prev=16,e.t2=e.catch(9);case 18:case"end":return e.stop()}}),e,null,[[9,16]])})))).apply(this,arguments)}var P=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1];Object(r.useEffect)((function(){var e=T.getFavoriteCities();n(e)}),[]);var c=function(e){var t=T.toggleCityFavorite(e);n(t)};return Object(N.jsx)("div",{className:"app",children:Object(N.jsxs)("div",{className:"main-app",children:[Object(N.jsx)(D,{}),Object(N.jsx)("div",{className:"favorite-cities-list",children:a.map((function(e){return Object(N.jsx)(k,{city:e,removeFromFavorites:c},"favorite-"+e.Key)}))})]})})},E=function(e){var t=e.onSetCitySearch,a=e.inputRef,r=g.debounce((function(e){t(e)}),500);return Object(N.jsx)("div",{className:"city-search",children:Object(N.jsx)("input",{ref:a,className:"city-input",type:"text",placeholder:"Search",onChange:function(e){r(e.target.value)}})})},L=Object(r.createContext)(null),B=function(e){var t=e.city,a=Object(r.useState)(null),n=Object(u.a)(a,2),c=n[0],i=n[1],s=Object(r.useContext)(L).todayWeather;return Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getFiveDayForecast(t);case 2:a=e.sent,i(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t&&e(t.Key)}),[t]),t&&c?Object(N.jsx)("div",{className:"five-day-forecast",children:c.map((function(e){return Object(N.jsxs)("div",{className:"forecast-day",children:[Object(N.jsx)("h4",{children:g.getDay(e.Date)}),Object(N.jsx)("img",{src:"https://www.accuweather.com/images/weathericons/".concat(s.IsDayTime?e.Day.Icon:e.Night.Icon,".svg"),alt:s.IsDayTime?e.Day.IconPhrase:e.Night.IconPhrase}),Object(N.jsx)("h3",{children:s.IsDayTime?e.Day.IconPhrase:e.Night.IconPhrase}),Object(N.jsx)("h3",{children:"".concat(e.Temperature.Minimum.Value.toFixed(0),"\xb0 / ").concat(e.Temperature.Maximum.Value.toFixed(0),"\xb0")})]},t.Key+e.EpochDate)}))}):null},J=a(36),V=function(e){var t=e.isMobileMenu,a=e.toggleMobileMenu,n=Object(r.useState)(window.innerWidth<850),c=Object(u.a)(n,2),i=c[0],o=c[1],l=Object(r.useContext)(L).currentCity,j=Object(r.useState)(!1),d=Object(u.a)(j,2),h=d[0],b=d[1],v=function(){var e=window.innerWidth;e<850?o(!0):e>850&&o(!1)};Object(r.useEffect)((function(){return window.addEventListener("resize",v),l&&b(T.isCityFavorite(l.Key)),function(){window.removeEventListener("resize",v)}}),[l]);var f=function(){l&&(T.toggleCityFavorite(l),b((function(e){return!e})))};return Object(N.jsxs)("div",{className:"header",children:[Object(N.jsx)("div",{className:"header-routing",children:i?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.b,{to:"/",children:Object(N.jsx)(S.a,{})}),Object(N.jsx)(s.b,{to:"/favorites",children:Object(N.jsx)(F.a,{})})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.b,{to:"/",children:Object(N.jsx)("h2",{children:"WeatherApp"})}),Object(N.jsx)(s.b,{to:"/favorites",children:Object(N.jsx)("h2",{children:"Favorites"})})]})}),i?Object(N.jsx)(J.a,{className:"mobile-hamburger-btn",onClick:function(){a(!t)}}):Object(N.jsx)("div",{className:"header-favorite-sate",children:h?Object(N.jsx)(F.a,{onClick:f}):Object(N.jsx)(F.b,{onClick:f})})]})},G=function(e){var t=e.cities,a=e.setCurrentCity,r=e.toggleMobileMenu,n=e.clearSearch;return Object(N.jsx)("div",{className:"cities-list ".concat(t&&t.length>0?"show":""),children:Object(N.jsx)("ul",{children:t&&t.length>0&&t.map((function(e){return Object(N.jsxs)("li",{onClick:function(){!function(e){a(e),r(!1),n()}(e)},className:"city-item",children:[e.City,", ",e.Country]},"item-".concat(e.Key))}))})})},H=function(e){var t=e.city,a=Object(r.useContext)(L),n=a.todayWeather,c=a.setTodayWeather,i=Object(r.useState)(!1),s=Object(u.a)(i,2),o=s[0],l=s[1];Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getCurrentWeather(t);case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t&&(e(t.Key),l(T.isCityFavorite(t.Key)))}),[t,c]);var h=function(){t&&(T.toggleCityFavorite(t),l((function(e){return!e})))};return t&&n?Object(N.jsxs)("div",{className:"todays-weather",children:[Object(N.jsx)("div",{className:"city-favorite-state",children:o?Object(N.jsx)(F.a,{onClick:h}):Object(N.jsx)(F.b,{onClick:h})}),Object(N.jsxs)("div",{className:"temp-display",children:[n.Temperature.Metric.Value.toFixed(0),"\xb0"]}),Object(N.jsxs)("div",{className:"city-and-time",children:[Object(N.jsx)("div",{className:"city-name",children:t.City}),Object(N.jsx)("div",{className:"city-time",children:g.getTime(n.LocalObservationDateTime)})]}),Object(N.jsxs)("div",{className:"weather-preview",children:[Object(N.jsx)("img",{src:"https://www.accuweather.com/images/weathericons/".concat(n.WeatherIcon,".svg"),alt:n.WeatherText}),Object(N.jsx)("p",{children:n.WeatherText})]})]}):null},R=function(e){var t=e.isOpen,a=e.exitScreen;return Object(N.jsx)("div",{onClick:function(){a(!1)},className:"screen ".concat(t?"screen-active":"")})},q=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),i=Object(u.a)(c,2),s=i[0],l=i[1],h=Object(r.useState)(null),b=Object(u.a)(h,2),v=b[0],f=b[1],p=Object(r.useState)(!1),x=Object(u.a)(p,2),O=x[0],m=x[1],y=Object(r.useRef)(null),g=Object(o.g)();Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getCityByKey(g.citykey);case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();g&&0!==Object.keys(g).length?e():navigator.geolocation.getCurrentPosition(function(){var e=Object(d.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={lat:t.coords.latitude,lng:t.coords.longitude},e.next=3,T.getCityByGeolocation(a);case 3:r=e.sent,l(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getCityByGeolocation();case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)}))))}),[]);var w=function(){var e=Object(d.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getCitiesNames(t);case 2:a=e.sent,n(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){m(e)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"app",children:Object(N.jsxs)(L.Provider,{value:{todayWeather:v,setTodayWeather:f,currentCity:s},children:[Object(N.jsxs)("div",{className:"main-app",children:[Object(N.jsx)(V,{isMobileMenu:O,toggleMobileMenu:C}),Object(N.jsxs)("div",{className:"weather-details-zone",children:[Object(N.jsx)(H,{city:s}),Object(N.jsx)(B,{city:s})]})]}),Object(N.jsxs)("div",{className:"search-details-zone ".concat(O?"show-menu":""),children:[Object(N.jsx)(E,{inputRef:y,onSetCitySearch:function(e){w(e)}}),Object(N.jsx)(G,{cities:a,setCurrentCity:l,toggleMobileMenu:C,clearSearch:function(){n([]),y.current&&(y.current.value="")}})]})]})}),Object(N.jsx)(R,{isOpen:O,exitScreen:C})]})};var Y=function(){return Object(N.jsx)(s.a,{children:Object(N.jsxs)(o.c,{children:[Object(N.jsx)(o.a,{exact:!0,path:"/favorites",component:P}),Object(N.jsx)(o.a,{path:"/city/:citykey",component:q}),Object(N.jsx)(o.a,{exact:!0,path:"/",component:q})]})})};a(66);i.a.render(Object(N.jsx)(n.a.StrictMode,{children:Object(N.jsx)(Y,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.c7a8aea3.chunk.js.map